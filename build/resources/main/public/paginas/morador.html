<main class="main" ng-controller="moradorController">

      <div class="container layout_form">
        <h1 class="titulo">Cadastrar Morador</h1>
        <article class="row formularios">
            <img class="col-md-3 img-rounded fotoForm" src="imagens/user/user0.jpg"/>
            <div class="col-md-9">
                <form class="form-group" name="moradorForm" novalidate>
                    <p class="message" ng-show="moradorForm.$invalid && submitted"></p>

                    <div class="form-group">
                        <label class="control-label" for="nome">Nome: </label>
                        <input class="form-control inputForm" type="text" name="nome" id="nome" maxlength="30"
                               placeholder="Nome Completo" required
                               ng-class="{'hasError' : moradorForm.nome.$invalid && submitted}"
                               ng-model="morador.nome"/>
                        <p class="obrigatorio" ng-show="moradorForm.nome.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="rg">RG: </label>
                        <input class="form-control inputForm" type="text" name="rg" id="rg" maxlength="20"
                               placeholder="Registro Geral" required
                               ng-class="{'hasError' : moradorForm.rg.$invalid && submitted}"
                               ng-model="morador.rg"/>
                        <p class="obrigatorio" ng-show="moradorForm.rg.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="ufRg">UF: </label>
                        <select class="form-control inputForm" name="ufRg" id="ufRg" required
                                ng-class="{'hasError' : moradorForm.ufRg.$invalid && submitted}"
                                ng-model="morador.ufRg">
                            <option value="" disabled>Selecione</option>
                            <option value="AC">AC</option>
                            <option value="AL">AL</option>
                            <option value="AM">AM</option>
                            <option value="AP">AP</option>
                            <option value="BA">BA</option>
                            <option value="CE">CE</option>
                            <option value="DF">DF</option>
                            <option value="ES">ES</option>
                            <option value="GO">GO</option>
                            <option value="MA">MA</option>
                            <option value="MT">MT</option>
                            <option value="MS">MS</option>
                            <option value="MG">MG</option>
                            <option value="PA">PA</option>
                            <option value="PB">PB</option>
                            <option value="PR">PR</option>
                            <option value="PE">PE</option>
                            <option value="PI">PI</option>
                            <option value="RJ">RJ</option>
                            <option value="RN">RN</option>
                            <option value="RO">RO</option>
                            <option value="RS">RS</option>
                            <option value="RR">RR</option>
                            <option value="SC">SC</option>
                            <option value="SE">SE</option>
                            <option value="SP">SP</option>
                            <option value="TO">TO</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="cpf">CPF: </label>
                        <input class="form-control inputForm" type="text" name="cpf" id="cpf" maxlength="11"
                               placeholder="CPF" required
                               ng-class="{'hasError' : moradorForm.cpf.$invalid && submitted}"
                               ng-model="morador.cpf"/>
                        <p class="obrigatorio" ng-show="moradorForm.cpf.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="telefoneFixo">Telefone: </label>
                        <input class="form-control inputForm" type="tel" name="telefoneFixo" id="telefoneFixo"
                               maxlength="10"
                               placeholder="Telefone" required
                               ng-class="{'hasError' : moradorForm.telefoneFixo.$invalid && submitted}"
                               ng-model="morador.telefoneFixo"/>
                        <p class="obrigatorio" ng-show="moradorForm.telefoneFixo.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="telefoneMovel">Celular: </label>
                        <input class="form-control inputForm" type="tel" name="telefoneMovel" id="telefoneMovel"
                               maxlength="10"
                               placeholder="Ceular" required
                               ng-class="{'hasError' : moradorForm.telefoneMovel.$invalid && submitted}"
                               ng-model="morador.telefoneMovel"/>
                        <p class="obrigatorio" ng-show="moradorForm.telefoneMovel.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="email">Email: </label>
                        <input class="form-control inputForm" type="email" name="email" id="email" maxlength="30"
                               placeholder="Email" required
                               ng-class="{'hasError' : moradorForm.email.$invalid && submitted}"
                               ng-model="morador.email"/>
                        <p class="obrigatorio" ng-show="moradorForm.email.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="bloco">Bloco: </label>
                        <select class="form-control inputForm" data-ng-model="firstSelect"
                                data-ng-options="bloco.idBloco as bloco.letraBloco for bloco in blocos" id="bloco"
                                required
                                ng-class="{'hasError' : moradorForm.bloco.$invalid && submitted}">
                            <option value="" disabled>Selecione</option>
                        </select>
                        <p class="obrigatorio" ng-show="moradorForm.bloco.$invalid && submitted"></p>
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="numeroCasa">Casa: </label>
                        <select class="form-control inputForm" data-ng-model="secondSelect"
                                data-ng-options=" unidade.numeroCasa for unidade in unidades | secondDropdown: firstSelect"
                                id="numeroCasa" required ng-change="morador.unidade=secondSelect"
                                ng-class="{'hasError' : moradorForm.numeroCasa.$invalid && submitted}">
                            <option value="" disabled>Selecione</option>
                        </select>
                        <p class="obrigatorio" ng-show="moradorForm.numeroCasa.$invalid && submitted"></p>
                    </div>

                    <button class="btn btn-primary" type="submit" ng-click="addMorador()">Salvar</button>
                    <button class="btn btn-primary" type="submit" ui-sref="home">Cancelar</button>
                    <!--<button class="btn btn-primary" type="reset" name="botao-morador">Limpar</button>-->
                </form>
                <p class="obrigatorio" ng-show="moradorForm.$invalid && submitted">* Os campos grifados são de
                    preenchimento obrigatório!</p>
            </div>
        </article>
    </div>

    <div class="list">
        <h1 class="titulo">Consultar Morador</h1>
        <article class="row">
            <div class="col-md-12 form-group">
                <label class="control-label" for="pesquisa">Pesquisar: </label>
                <input type="text" id="pesquisa" class="form-control inputSearch" placeholder="Pesquisar Morador">
            </div>
            <div class="col-md-12">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>Nome</th>
                        <th>RG</th>
                        <th>UF</th>
                        <th>CPF</th>
                        <th>Telefone</th>
                        <th>Celular</th>
                        <th>Email</th>
                        <th>Bloco</th>
                        <th>Casa</th>
                        <th>Visualizar/Editar/Apagar</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="morador in moradores">
                        <td>{{morador.nome}}</td>
                        <td>{{morador.rg}}</td>
                        <td>{{morador.ufRg}}</td>
                        <td>{{morador.cpf}}</td>
                        <td>{{morador.telefoneFixo}}</td>
                        <td>{{morador.telefoneMovel}}</td>
                        <td>{{morador.email}}</td>
                        <td>{{morador.unidade.bloco.letraBloco}}</td>
                        <td>{{morador.unidade.numeroCasa}}</td>
                        <td>
                            <form class="form-inline">
                                <div class="form-group">
                                    <button type="button" class="btn btn-success">
                                        <i class="button_list material-icons">find_in_page</i>
                                    </button>
                              
                                    <button  ng-controller="unidadeController" type="button" class="btn btn-warning" ng-click="getCurrentMorador(morador);getCurrentUnidade(unidade);">
                                        <i class="button_list material-icons">mode_edit</i>
                                    </button>

                                    <button type="button" class="btn btn-danger"
                                            ng-click="deleteMorador(morador.idPessoa)">
                                        <i class="button_list material-icons">delete_forever</i>
                                    </button>
                                </div>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </article>
  </div>
</main>   
